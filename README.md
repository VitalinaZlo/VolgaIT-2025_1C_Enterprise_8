# Учёт тарифицируемых услуг
**Automation of Billing Services Accounting** — это проект, направленный на разработку конфигурации 1С для автоматизации деятельности компаний, оказывающих тарифицируемые услуги, с системой учета по тарифам, лимитам и расчетами за превышение.

Данный проект был создан для второго тура Международной цифровой олимпиады «Волга-IT'25» в дисциплине «1С-программирование».

## Задача проекта
Разработать конфигурацию, в которой:

- Есть справочники организаций, покупателей, услуг и тарифов организаций; 
- Можно автоматически заполнять условия договоров на основе выбранного тарифа;
- Можно сформировать акты оказания услуг и проводить их через регистры накопления;
- Есть возможность создать итоговый расчёт по определённому покупателю с учётом базовых лимитов и их превышений;
- Можно сформировать отчёт по всем оказанным услугам за определённый период.

## Структура конфигурации


### Справочники

#### `«Организации»`:
- `Наименование` — полное юридическое наименование организации;
- `ИНН` — идентификационный номер налогоплательщика (существует проверка длины в 10 или 12 цифр);
- `Юридический адрес` — официальный адрес регистрации организации;
- `Контактный телефон` — основной номер телефона организации (вводится в формате 8 (XXX) XXX-XX-XX);
- `Электронный адрес` — электронный адрес для связи с организацией (существует проверка наличия символов «.» и «@»).
     
#### `«Покупатели»`:
- `Наименование` — полное юридическое наименование организации;
- `ИНН` — идентификационный номер налогоплательщика (существует проверка длины в 10 или 12 цифр);
- `Юридический адрес` — официальный адрес регистрации организации;
- `Контактный телефон` — основной номер телефона организации (вводится в формате 8 (XXX) XXX-XX-XX);
- `Электронный адрес` — электронный адрес для связи с организацией (существует проверка наличия символов «.» и «@»).
      
#### `«Услуги»`:
- `Наименование` — полное наименование услуги.

#### `«Тарифы организаций»`:
- `Наименование` — полное наименование тарифа;
- `Владелец` — наименование выбранной организации, которая предоставляет тарифицируемые услуги, из справочника «Организации».
- Табличная часть `«Перечень базовых услуг»`:
    - `Услуга` — наименование выбранной услуги из справочника «Услуги»;
    - `Лимит` — установленное для данной услуги максимальное количество, входящее в базовый пакет тарифа;
    - `Цена` — установленная для данной услуги базовая цена;
    - `Сумма` — общая стоимость пакета по данной услуге, рассчитанная как `Лимит` * `Цена` (поле высчитывается автоматически).

    
### Документы

#### `«Перечень базовых услуг»`:
- `Тариф` — наименование выбранного тарифа из справочника «Тарифы организаций»;
- Табличная часть `«Перечень базовых услуг»` — дублирует по структуре табличную часть `«Перечень базовых услуг»` из выбранного тарифа.

**Примечание:** при выборе/смене тарифа табличная часть (ТЧ) автоматически заполняется информацией об услугах из ТЧ выбранного тарифа. Для соответствия данных справочнику  `«Тарифы организаций»` редактирование строк пользователю недоступно.
  
#### `«Стоимость услуг при превышении лимита»`:
- `Тариф` — наименование выбранного тарифа из справочника «Тарифы организаций».
-  Табличная часть `«Детали тарифа при превышении лимита`:
    - `Услуга` — наименование выбранной услуги из справочника «Услуги»;
    - `Цена` — установленная для данной услуги цена при превышении лимита по услуге.

**Примечание:** при выборе/смене тарифа ТЧ автоматически заполняется услугами из ТЧ выбранного тарифа. Поле `Услуга` при этом для редактирования пользователю недоступно, тогда как поле `Цена` требует обязательного изменения. Система контролирует, чтобы цена при превышении лимита была строго выше базовой цены тарифа — в противном случае документ провести не удастся.
    
#### `«Договор с покупателем»`:
- `Организация` — исполнитель тарифицируемых услуг из справочника «Организации»;
- `Покупатель` — заказчик тарифицируемых услуг из справочника «Покупатели»;
- `Тариф` — наименование выбранного тарифа из справочника «Тарифы организаций»;
- Табличная часть `«Перечень базовых услуг»` — дублирует по структуре табличную часть документа `«Перечень базовых услуг»`;
- Табличная часть `«Стоимость услуг при превышении»` — дублирует по структуре табличную часть документа `«Стоимость услуг при превышении лимита»`.

**Примечание:** Обе ТЧ договора — `«Перечень базовых услуг»` и `«Стоимость услуг при превышении»`, — заполняются автоматически при выборе тарифа на основе документов `«Перечень базовых услуг»` и `«Стоимость услуг при превышении лимита»` соответсвенно. Если для выбранного тарифа отсутствует какой-либо из двух документов, то провести договор не удастся. Для соответствия условий договора установленному тарифу редактирование обеих ТЧ пользователю недоступно.

#### `«Акт оказания услуги»`:
- `Покупатель` — заказчик тарифицируемых услуг из справочника «Покупатели»;
- `Организация` — исполнитель тарифицируемых услуг из справочника «Организации».
- Табличная часть `«Оказанные услуги»`:
    - `Услуга` — наименование выбранной услуги из справочника «Услуги»;
    -  `Количество` — количество оказанной услуги.
 
**Примечание:** Список выбора поля `Организация` состоит только из тех организаций, с которыми у выбранного покупателя заключены действующие договоры. Аналогично, в поле `Услуга` отображаются исключительно те услуги, которые входят в тарифы договоров между выбранными покупателем и организацией. При изменении покупателя или организации список доступных услуг обновляется автоматически, а вся заполненная ТЧ очищается. Перед сменой значений полей система запрашивает подтверждение действия, предупреждая о потере введённых данных ТЧ.

#### `«Итоговые расчёты по покупателям за период»`:
- `Дата начала` — дата начала периода, по которому будет выполнятся расчёт;
- `Дата конца` — дата конца периода (включительно), по которому будет выполнятся расчёт;
- `Покупатель` — заказчик тарифицируемых услуг из справочника «Покупатели»;
- `Итоговая сумма` — сумма, рассчитанная по колонке `Сумма итого` из табличной части документа.
- Табличная часть `«Оказанные услуги»`:
    - `Услуга` — наименование выбранной услуги из справочника «Услуги»;
    -  `Количество` — итоговое количество оказанной услуги этого вида из всех документов «Акт оказания услуги»;
    -  `Сумма итого` — сумма, рассчитанная за количество оказанных услуг с учётом лимита и разности базовой цены и цены при превышении лимита.  

**Примечание:** При выборе/смене покупателя и периода ТЧ заполняется атоматически. При этом поле `Сумма итого` рассчитывается с учётом лимитов: услуги в пределах лимита учитываются по базовой цене, а выходящие за лимит — по повышенной ставке. Это обеспечивает автоматический корректный расчёт без ручного вмешательства пользователя, поэтому редактирование строк ТЧ для пользователя также недоступно.
    
### Регистры

#### Регистр оборотов `«Оказанные услуги»`:
- Измерение `Покупатель` — заказчик тарифицируемых услуг из справочника «Покупатели»;
- Измерение `Организация` — исполнитель тарифицируемых услуг из справочника «Организации»;
- Измерение `Оказанная услуга` — наименование выбранной услуги из справочника «Услуги»;
- Ресурс `Количество` — количество оказанной услуги.

#### Регистр остатков `«Взаиморасчёты с покупателем»`:
- Измерение `Покупатель` — заказчик тарифицируемых услуг из справочника «Покупатели»;
- Ресурс `Итоговая сумма` — сумма, рассчитанная по колонке `Сумма итого` из табличной части документа `«Итоговые расчёты по покупателям за период»`.

    
### Отчёты

#### `«Оказанные услуги за период»`:
- `Покупатель` — заказчик тарифицируемых услуг из справочника «Покупатели»;
- `Количество услуг` — суммарное количество оказанный покупателю услуг.
